<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>営業リスト無料作成サイト | SalesDB（セールスデービー）</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="icon" href="https://salessystem.co.jp/wpcms/wp-content/uploads/2024/06/favicon-1.png" type="image/png">
    <style>
        body {
            background-image: url('https://salessystem.co.jp/wpcms/wp-content/uploads/2024/06/pixta_75413139_M.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            font-family: 'Arial', sans-serif;
            margin: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .header {
            background-color: white;
            padding: 10px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .header img {
            width: 150px;
        }

        .header nav {
            display: flex;
            align-items: center;
            margin-left: auto; /* ナビゲーションメニューを右詰めにする */
        }

        .header nav a {
            color: #10b981;
            margin-left: 20px;
            text-decoration: none;
            font-weight: bold;
            position: relative;
        }

        .header nav a:last-child {
            margin-right: 20px; /* 最後のリンクに右マージンを追加 */
        }

        .header nav a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 3px;
            background-color: #10b981;
            bottom: -5px;
            left: 0;
            transition: width 0.3s ease-in-out;
        }

        .header nav a:hover::after {
            width: 100%;
        }

        .header .button {
            border: 2px solid #10b981;
            border-radius: 5px;
            padding: 5px 10px;
            text-decoration: none;
            color: #10b981;
            font-weight: bold;
            position: relative;
            overflow: hidden;
        }

        .header .button:hover {
            background-color: #10b981;
            color: white;
            text-decoration: none;
        }

        .menu-toggle {
            display: none;
            cursor: pointer;
            font-size: 1.8rem;
            color: #10b981;
            position: absolute;
            left: 10px; /* 左端に配置 */
        }

        .overlay {
            background-color: rgba(0, 128, 128, 0.7);
            position: relative;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding-top: 160px;
            padding-bottom: 80px;
            flex: 1;
            transition: padding 0.3s ease-in-out;
        }

        .overlay.expanded {
            padding-top: 260px;
        }

        .logo {
            width: 350px;
            margin-top: 20px;
            margin-bottom: 20px;
        }

        .headline {
            color: white;
            font-size: 2.3rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
            line-height: 1.4;
        }

        .search-results {
            background-color: rgba(255, 255, 255, 0.7);
            padding: 20px;
            margin-bottom: 40px;
            width: 80%;
            max-width: 1000px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .search-results .search-count {
            font-size: 1rem;
            color: #808080;
            font-weight: bold;
        }

        .search-results .search-count span {
            font-size: 2rem;
            color: #10b981;
            margin-right: 5px;
        }

        .hexagon {
            position: absolute;
            top: 0;
            left: 0;
            transform: translate(-50%, -50%);
            width: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hexagon img {
            width: 100%;
            height: auto;
        }

        .search-box {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 10px;
            width: 80%;
            max-width: 1000px;
            border-radius: 5px;
            overflow: hidden;
            position: relative;
        }

        .search-box input[type="text"] {
            padding: 15px;
            font-size: 1rem;
            border: 1px solid #ddd;
            outline: none;
            flex-grow: 1;
            cursor: pointer;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        .search-box input[type="text"]:hover,
        .search-box input[type="text"]:focus {
            border-color: #10b981;
            box-shadow: 0 0 5px rgba(16, 185, 129, 0.5);
        }

        .search-box button {
            padding: 15px 30px;
            font-size: 1rem;
            border: none;
            background-color: #10b981;
            color: white;
            cursor: pointer;
            outline: none;
            flex-shrink: 0;
            flex-grow: 0;
        }

        .toggle-link {
            color: white;
            cursor: pointer;
            font-size: 1rem;
            text-decoration: underline;
            margin-top: 10px;
            margin-bottom: 20px;
        }

        .details {
            display: none;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 30px;
            border-radius: 10px;
            width: 80%;
            max-width: 1000px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 40px;
            font-family: 'Helvetica Neue', sans-serif;
            position: relative;
        }

        .details h3 {
            margin-bottom: 10px;
            font-size: 1.2rem;
            font-weight: bold;
            color: #333;
            border-bottom: 2px solid #10b981;
            padding-bottom: 5px;
            position: relative;
        }

        .details h3 .clear-button {
            position: absolute;
            right: 0;
            top: 0;
            background-color: #ccc;
            color: white;
            padding: 2px 10px;
            border: none;
            border-radius: 5px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .details h3 .clear-button:hover {
            background-color: #bbb;
        }

        .details h3 .clear-button i {
            margin-left: 5px;
            font-size: 0.9rem;
        }

        .details div {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            flex-wrap: nowrap;
        }

        .details label {
            margin-right: 10px;
            font-size: 0.9rem;
        }

        .details input[type="checkbox"] {
            margin-right: 10px;
            width: 20px;
            height: 20px;
        }

        .details input[type="text"],
        .details textarea {
            padding: 10px;
            font-size: 0.9rem;
            border-radius: 5px;
            border: 1px solid #ccc;
            outline: none;
            flex-grow: 1;
        }

        .details input[type="text"]:focus,
        .details textarea:focus {
            border-color: #10b981;
            box-shadow: 0 0 5px rgba(16, 185, 129, 0.5);
        }

        .details input[type="text"] {
            -moz-appearance: textfield;
        }

        .details input[type="text"]::-webkit-outer-spin-button,
        .details input[type="text"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .details input[type="text"].numeric-only {
            text-align: right;
        }

        .details .row {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: nowrap;
        }

        .details .row label {
            width: 20%;
            text-align: right;
            padding-right: 10px;
        }

        .details .row input,
        .details .row textarea {
            width: calc(30% - 10px);
            margin-right: 10px;
        }

        .details .row span {
            margin-left: 10px;
            font-size: 0.9rem;
            color: #333;
        }

        .tags {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
            width: 80%;
            max-width: 1000px;
            margin-bottom: 10px;
        }

        .tag {
            background-color: rgba(255, 255, 255, 0.7);
            color: #0f6654;
            padding: 8px 12px;
            border-radius: 20px;
            margin: 5px;
            cursor: pointer;
            text-decoration: none;
            font-size: 0.875rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .tag:hover {
            background-color: #10b981;
            color: white;
        }

        .more-tags {
            display: block;
            width: 80%;
            max-width: 1000px;
            text-align: right;
            color: white;
            text-decoration: underline;
            margin-top: 10px;
            font-size: 1rem;
            font-weight: normal;
        }

        .more-tags:hover {
            color: #d1d5db;
        }

        .more-tags i {
            font-style: normal;
        }

        .cta-button {
            width: 100%;
            text-align: center;
            background-color: #10b981;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            padding: 20px 0;
            text-decoration: none;
            display: block;
        }

        .cta-button:hover {
            background-color: #0f9967;
        }

        .header nav .button::after {
            display: none;
        }

        /* 連絡先等のチェックボックスと文字のサイズ調整 */
        .details .contacts {
            display: flex;
            flex-wrap: wrap;
            align-items: flex-start;
            gap: 15px;
        }

        .details .contacts div {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .details .contacts label {
            font-size: 1rem;
        }

        /* 説明文のスタイル */
        .details .note {
            font-size: 0.9rem;
            color: #333;
            text-align: right;
            margin-top: 10px;
            width: 100%;
            font-family: 'Helvetica Neue', sans-serif;
        }

        /* ポップアップのスタイル */
        .popup {
            position: fixed;
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            max-width: 1000px;
            background-color: white;
            border: 1px solid #ccc;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: none;
            z-index: 2000;
            padding: 20px;
            border-radius: 10px;
            overflow: auto;
            max-height: 80vh;
        }

        .popup.active {
            display: block;
        }

        .popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #10b981;
            padding-bottom: 10px;
            margin-bottom: 20px;
            position: relative;
        }

        .popup-header h2 {
            font-size: 1.2rem;
            font-weight: bold;
            color: #333;
            margin-right: 20px;
            flex: 1;
        }

        .popup-header .search-count-popup {
            font-size: 0.9rem;
            color: #808080;
            font-weight: bold;
            white-space: nowrap;
            flex: 1;
            text-align: center;
        }

        .popup-header button {
            background-color: transparent;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #333;
            margin-left: auto;
        }

        .tabs {
            display: flex;
            border-bottom: 2px solid #ddd;
            margin-bottom: 10px;
            border-radius: 10px;
            overflow: hidden;
        }

        .tab {
            padding: 10px;
            cursor: pointer;
            flex: 1;
            text-align: center;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-bottom: none;
            transition: background-color 0.3s, border-color 0.3s;
        }

        .tab:hover {
            background-color: #f0f0f0;
        }

        .tab.active {
            background-color: #10b981;
            color: white;
            font-weight: bold;
            border-bottom: 1px solid white;
        }

        .industry-popup-content,
        .region-popup-content,
        .tag-popup-content {
            display: none;
        }

        .industry-popup-content.active,
        .region-popup-content.active,
        .tag-popup-content.active {
            display: block;
        }

        .industry-popup-content .columns,
        .tag-popup-content .columns {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            flex-wrap: wrap;
        }

        .industry-popup-content .column,
        .tag-popup-content .column {
            flex: 1;
            max-height: 400px;
            overflow-y: auto;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            min-width: 45%;
            margin-top: 10px;
        }

        .industry-popup-content .column h3,
        .tag-popup-content .column h3 {
            font-size: 1rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .industry-popup-content .column ul,
        .tag-popup-content .column ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .industry-popup-content .column ul li,
        .tag-popup-content .column ul li {
            padding: 10px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .industry-popup-content .column ul li.selected,
        .tag-popup-content .column ul li.selected {
            background-color: #10b981;
            color: white;
        }

        .industry-popup-content .column ul li input[type="checkbox"],
        .tag-popup-content .column ul li input[type="checkbox"] {
            margin-right: 10px;
            width: 20px;
            height: 20px;
        }

        .industry-popup-content .column ul li label,
        .tag-popup-content .column ul li label {
            flex-grow: 1;
        }

        .industry-popup-content .column ul li .count-box,
        .tag-popup-content .column ul li .count-box {
            background-color: #e0e0e0;
            border-radius: 5px;
            padding: 5px 10px;
            font-size: 0.8rem;
            color: #333;
            display: inline-block;
        }

        .popup-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        .popup-buttons button {
            padding: 10px 20px;
            border: none;
            background-color: #10b981;
            color: white;
            cursor: pointer;
            font-size: 1rem;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .popup-buttons button:hover {
            background-color: #0f9967;
        }

        .classification-title {
            text-align: center;
            font-size: 1rem;
            font-weight: normal;
            margin-bottom: 10px;
            color: #333;
        }

        .popup-overlay.active,
        .popup.active {
            display: block;
        }

        .region-group {
            font-weight: bold;
            cursor: pointer;
            margin: 5px 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .region-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 10px;
        }

        .region-group .count-box {
            background-color: #f0f0f0;
            border-radius: 5px;
            padding: 5px 10px;
            font-size: 0.8rem;
            color: #555;
            margin-left: 10px;
            display: inline-block;
        }

        .region-popup-content {
            display: none;
        }

        .region-popup-content.active {
            display: flex;
            justify-content: space-between;
            gap: 20px;
        }

        .region-popup-content .column {
            flex: 1;
            max-height: 400px;
            overflow-y: auto;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
        }

        .region-popup-content .column h3 {
            font-size: 1rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .region-popup-content .column ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .region-popup-content .column ul li {
            padding: 10px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .region-popup-content .column ul li.selected {
            background-color: #10b981;
            color: white;
        }

        .region-popup-content .column ul li input[type="checkbox"] {
            margin-right: 10px;
            width: 20px;
            height: 20px;
        }

        .region-popup-content .column ul li label {
            flex-grow: 1;
        }

        .region-popup-content .column ul li .count-box {
            background-color: #e0e0e0;
            border-radius: 5px;
            padding: 5px 10px;
            font-size: 0.8rem;
            color: #333;
            display: inline-block;
        }

        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 1000;
        }

        .popup-overlay.active {
            display: block;
        }

        /* 検索結果表示用のスタイル */
        .search-count-popup {
            font-size: 0.9rem;
            color: #808080;
            font-weight: bold;
            white-space: nowrap;
            margin-right: 20px;
        }

        .search-count-popup span {
            font-size: 1.5rem;
            color: #10b981;
            margin-right: 5px;
        }

        /* 「この条件で検索」ボタン */
        .search-cta-button {
            width: 100%;
            text-align: center;
            background-color: #10b981;
            color: white;
            font-size: 1rem;
            font-weight: bold;
            padding: 15px 0;
            text-decoration: none;
            display: block;
            margin-top: 20px;
            border-radius: 5px;
        }

        .search-cta-button:hover {
            background-color: #0f9967;
        }

        /* キーワードで探す フォームのスタイル */
        .keyword-search {
            display: block;
            margin: 15px 0;
            padding: 10px;
            font-size: 1rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            outline: none;
            flex-grow: 1;
            width: 100%;
            box-sizing: border-box;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        .keyword-search:focus,
        .keyword-search:hover {
            border-color: #10b981;
            box-shadow: 0 0 5px rgba(16, 185, 129, 0.5);
        }

        /* ポップアップ内のキーワード検索フォームのスタイル変更 */
        #regionKeyword:focus,
        #regionKeyword:hover,
        #detailedIndustryKeyword:focus,
        #detailedIndustryKeyword:hover,
        #tagKeyword:focus,
        #tagKeyword:hover {
            border-color: #10b981;
            box-shadow: 0 0 5px rgba(16, 185, 129, 0.5);
        }

        /* ここからレスポンシブ対応 */
        @media (max-width: 768px) {
            .header nav {
                display: none; /* ナビゲーションメニューを隠す */
            }

            .menu-toggle {
                display: block; /* スマホ用サイズでは表示する */
            }

            .header {
                justify-content: space-between; /* ヘッダーのアイテムを両端に配置 */
            }

            .header .button-container {
                position: absolute;
                right: 10px;
                top: 50%;
                transform: translateY(-50%);
                display: flex;
                gap: 5px; /* ボタンの間のスペース */
            }

            .header .button {
                font-size: 0.8rem; /* スマホサイズでのボタンの文字サイズを小さく */
                padding: 5px 8px; /* ボタンのパディングを調整 */
            }

            .overlay {
                padding-top: 100px; /* 修正: スマホサイズでのオーバーレイのパディング */
                padding-bottom: 40px;
            }

            .headline {
                font-size: 1.5rem;
                padding: 0 10px;
                word-wrap: break-word;
            }

            .search-box {
                flex-wrap: wrap;
            }

            .search-box input[type="text"] {
                flex: 1 1 100%;
                min-width: auto;
            }

            .search-box button {
                flex: 1 1 100%;
                min-width: auto;
                padding: 10px;
                box-sizing: border-box;
            }

            .search-results {
                width: 80%;
                margin-bottom: 20px;
                padding: 10px;
            }

            .details {
                width: 90%; /* スマホサイズでのポップアップに余白を追加 */
                margin: 0 auto; /* 中央揃え */
            }

            /* 検索結果の背景リサイズ */
            .search-results {
                background-size: contain;
            }

            /* ロゴを中央に配置 */
            .header img {
                margin-left: auto;
                margin-right: auto;
            }

            /* ドロップダウンメニューのスタイル */
            .dropdown {
                display: none;
                flex-direction: column;
                background-color: white;
                position: absolute;
                top: 50px; /* 修正: ヘッダーの下に表示 */
                left: 0;
                width: 200px;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                z-index: 1000; /* ヘッダーの上に表示 */
            }

            .dropdown.active {
                display: flex;
            }

            .dropdown a {
                padding: 10px;
                text-align: center;
                color: #10b981;
                text-decoration: none;
                border-bottom: 1px solid #ddd;
            }

            .dropdown a:hover {
                background-color: #f0f0f0;
            }
        }/* ここまでレスポンシブ対応 */

        /* パソコンサイズでのフッターのテキスト表示を非表示にする */
        @media (min-width: 769px) {
            .dropdown {
                display: none;
            }

        /* ヘッダーのメニューの文字サイズを調整 */
        @media (min-width: 768px) and (max-width: 944px) {
            .header nav a {
                font-size: 0.7rem; /* メニューの文字サイズを小さくする */
                margin-left: 10px; /* マージンを調整して改行を防ぐ */
                margin-right: 10px; /* 左右にマージンを均等に設定 */
                right: 200px;　/* ボタンの位置を考慮 */
            }

            .header .button-container {
                position: absolute;/* 会員ログインなどのボタンを小さく */
                font-size: 0.8rem; /* メニューの文字サイズを小さくする */
                right: 10px;
                top: 50%;
                transform: translateY(-50%);
                display: flex;
                gap: 5px; /* ボタンの間のスペース */
            }

            .search-box {
                flex-wrap: wrap;/* 検索ボックスの形を変更 */
            }

            .search-box input[type="text"] {
                flex: 1 1 100%;
                min-width: auto;
            }

            .search-box button {
                flex: 1 1 100%;
                min-width: auto;
                padding: 10px;
                box-sizing: border-box;
            }

            .header nav {
                flex-wrap: nowrap; /* メニューが改行されないようにする */
            }
        }
    </style>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header class="header">
        <img src="https://salessystem.co.jp/wpcms/wp-content/uploads/2024/06/SalesDB_logo_by-1.png" alt="SalesDB ロゴ">
        <div class="menu-toggle" onclick="toggleMenu()">
            <i class="fa-solid fa-bars"></i> <!-- Font Awesomeのハンバーガーメニューアイコン -->
        </div>
        <nav>
            <a href="#">SalesDBとは？</a>
            <a href="#">業種から探す</a>
            <a href="#">地域から探す</a>
            <a href="#">#タグから探す</a>
        </nav>
        <div class="button-container">
            <a href="#" class="button">無料会員登録</a>
            <a href="#" class="button">会員ログイン</a>
        </div>
    </header>
    <div class="overlay" id="overlay">
        <h1 class="headline">登録データ数が業界最多の800万件以上<br>国内最大級の企業/店舗/施設データベース</h1>
        <div class="logo-container">
            <img src="https://salessystem.co.jp/wpcms/wp-content/uploads/2024/05/SalesDB_モノトーン_logo_by表記あり_白抜き.png" alt="SalesDB ロゴ" class="logo">
        </div>
        <div class="search-results">
            <div class="hexagon">
                <img src="https://salessystem.co.jp/wpcms/wp-content/uploads/2024/06/mark.png" alt="月300件まで無料ダウンロード">
            </div>
            <div class="search-count">検索結果 <span>8,320,452</span>件</div>
        </div>
        <div class="search-box">
            <input type="text" placeholder="業種" id="industryInput" onclick="showPopup('industry', event)">
            <input type="text" placeholder="地域" id="regionInput" onclick="showPopup('region', event)">
            <input type="text" placeholder="フリーワード">
            <button>検索</button>
        </div>
        <div class="toggle-link" onclick="toggleDetails()">詳細検索 <span>&#9660;</span></div>
        <div class="details">
            <h3 class="keyword-section">
                キーワード
                <button class="clear-button" onclick="clearInputs('keyword-section')">クリア <i class="fas fa-chevron-down"></i></button>
            </h3>
            <div class="keyword-section row">
                <label for="excludeKeywords">除外するキーワード</label>
                <textarea id="excludeKeywords" rows="2" placeholder="複数行入力欄"></textarea>
                <label for="tags">#タグを選択</label>
                <input type="text" id="tags" onclick="showPopup('tag', event)" readonly>
            </div>
            <!-- 他の詳細検索項目 -->
            <h3 class="performance-section">
                業績
                <button class="clear-button" onclick="clearInputs('performance-section')">クリア <i class="fas fa-chevron-down"></i></button>
            </h3>
            <div class="performance-section row">
                <label for="revenueMin">売上高(年商)</label>
                <input type="text" id="revenueMin" class="numeric-only" oninput="formatNumber(this)">
                <span>円 ～</span>
                <input type="text" id="revenueMax" class="numeric-only" oninput="formatNumber(this)">
                <span>円</span>
            </div>
            <div class="performance-section row">
                <label for="profitMin">経常利益</label>
                <input type="text" id="profitMin" class="numeric-only" oninput="formatNumber(this)">
                <span>円 ～</span>
                <input type="text" id="profitMax" class="numeric-only" oninput="formatNumber(this)">
                <span>円</span>
            </div>

            <h3 class="scale-section">
                規模
                <button class="clear-button" onclick="clearInputs('scale-section')">クリア <i class="fas fa-chevron-down"></i></button>
            </h3>
            <div class="scale-section row">
                <label for="capitalMin">資本金</label>
                <input type="text" id="capitalMin" class="numeric-only" oninput="formatNumber(this)">
                <span>円 ～</span>
                <input type="text" id="capitalMax" class="numeric-only" oninput="formatNumber(this)">
                <span>円</span>
            </div>
            <div class="scale-section row">
                <label for="establishedYearMin">設立年</label>
                <input type="text" id="establishedYearMin" class="numeric-only" maxlength="4" oninput="formatNumber(this)">
                <span>年 ～</span>
                <input type="text" id="establishedYearMax" class="numeric-only" maxlength="4" oninput="formatNumber(this)">
                <span>年</span>
            </div>
            <div class="scale-section row">
                <label for="employeesMin">従業員数</label>
                <input type="text" id="employeesMin" class="numeric-only" oninput="formatNumber(this)">
                <span>人 ～</span>
                <input type="text" id="employeesMax" class="numeric-only" oninput="formatNumber(this)">
                <span>人</span>
            </div>
            <div class="scale-section row">
                <label for="branchesMin">事業所数</label>
                <input type="text" id="branchesMin" class="numeric-only" oninput="formatNumber(this)">
                <span>拠点 ～</span>
                <input type="text" id="branchesMax" class="numeric-only" oninput="formatNumber(this)">
                <span>拠点</span>
            </div>
            <div class="scale-section row">
                <label for="storesMin">店舗数</label>
                <input type="text" id="storesMin" class="numeric-only" oninput="formatNumber(this)">
                <span>店舗 ～</span>
                <input type="text" id="storesMax" class="numeric-only" oninput="formatNumber(this)">
                <span>店舗</span>
            </div>
            <div class="scale-section row">
                <label for="factoriesMin">工場数</label>
                <input type="text" id="factoriesMin" class="numeric-only" oninput="formatNumber(this)">
                <span>箇所 ～</span>
                <input type="text" id="factoriesMax" class="numeric-only" oninput="formatNumber(this)">
                <span>箇所</span>
            </div>

            <h3 class="businessType-section">
                業態
                <button class="clear-button" onclick="clearInputs('businessType-section')">クリア <i class="fas fa-chevron-down"></i></button>
            </h3>
            <div class="businessType-section">
                <input type="checkbox" id="btob">
                <label for="btob">BtoB</label>
                <input type="checkbox" id="btoc">
                <label for="btoc">BtoC</label>
                <input type="checkbox" id="ctoc">
                <label for="ctoc">CtoC</label>
            </div>
            <p class="note">※業種指定よりも、こちらの指定が優先されます</p>

            <h3>
                連絡先
                <button class="clear-button" onclick="clearInputs('contacts')">クリア <i class="fas fa-chevron-down"></i></button>
            </h3>
            <div class="contacts">
                <div>
                    <input type="checkbox" id="summary">
                    <label for="summary">概要説明が必須</label>
                </div>
                <div>
                    <input type="checkbox" id="corporateNumber">
                    <label for="corporateNumber">法人番号が必須</label>
                </div>
                <div>
                    <input type="checkbox" id="representativeName">
                    <label for="representativeName">代表者名が必須</label>
                </div>
                <div>
                    <input type="checkbox" id="phoneNumber">
                    <label for="phoneNumber">電話番号が必須</label>
                </div>
                <div>
                    <input type="checkbox" id="faxNumber">
                    <label for="faxNumber">FAX番号が必須</label>
                </div>
                <div>
                    <input type="checkbox" id="websiteUrl">
                    <label for="websiteUrl">サイトURLが必須</label>
                </div>
                <div>
                    <input type="checkbox" id="contactUrl">
                    <label for="contactUrl">お問い合わせURLが必須</label>
                </div>
                <div>
                    <input type="checkbox" id="emailAddress">
                    <label for="emailAddress">メールアドレスが必須</label>
                </div>
                <div>
                    <input type="checkbox" id="xUrl">
                    <label for="xUrl">X(旧:Twitter)のURLが必須</label>
                </div>
                <div>
                    <input type="checkbox" id="facebookUrl">
                    <label for="facebookUrl">FacebookのURLが必須</label>
                </div>
                <div>
                    <input type="checkbox" id="instagramUrl">
                    <label for="instagramUrl">InstagramのURLが必須</label>
                </div>
            </div>

            <p class="note">※団体名/所在地は100％付与されています。</p>

            <a href="#" class="search-cta-button">この条件で検索</a>
        </div>
        <div class="tags">
            <a href="#" class="tag">#店舗</a>
            <a href="#" class="tag">#株式会社のみ</a>
            <a href="#" class="tag">#設立3年以内の企業</a>
            <a href="#" class="tag">#官公庁</a>
            <a href="#" class="tag">#営業お断りをしている企業</a>
            <a href="#" class="tag">#中途採用と新卒採用の両方を行っている企業</a>
        </div>
        <a href="#" class="more-tags">その他のタグから探す <i>&gt;</i></a>
    </div>
    <a href="#" class="cta-button">今すぐフリープランに登録する <i>&gt;</i></a>

    <!-- ドロップダウンメニュー -->
    <div class="dropdown" id="dropdownMenu">
        <a href="#">SalesDBとは？</a>
        <a href="#">業種から探す</a>
        <a href="#">地域から探す</a>
        <a href="#">#タグから探す</a>
    </div>

    <!-- ポップアップのためのコンテンツ -->
    <div class="popup-overlay" id="popupOverlay" onclick="closeAllPopups()"></div>

    <!-- 業種のポップアップ -->
    <div id="industryPopup" class="popup">
        <div class="popup-header">
            <h2>業種を選択</h2>
            <div class="search-count-popup">検索結果 <span>12,345</span>件</div>
            <button onclick="closePopup('industry')">&times;</button>
        </div>
        <div class="tabs">
            <div class="tab active" data-tab="simple" onclick="switchTab('industry', 'simple')">簡易版で選択（オリジナル業種分類）</div>
            <div class="tab" data-tab="detailed" onclick="switchTab('industry', 'detailed')">詳細版で選択（日本標準産業分類）</div>
        </div>
        <div class="industry-popup-content active" id="industrySimple">
            <input type="text" placeholder="キーワードで探す" id="simpleIndustryKeyword" class="keyword-search" onkeyup="searchKeyword('simple', this.value)">
            <div class="columns">
               <div class="column">
                    <h3>大分類</h3>
                    <ul id="detailedCategories">
                        {% for category in categories %}
                        <li>
                            <input type="checkbox" id="detailedCategory{{ category.id }}" onchange="toggleDetailedCategory('{{ category.id }}')">
                            <label for="detailedCategory{{ category.id }}">{{ category.code }}.{{ category.name }}</label>
                            <span class="count-box">1,234</span>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
                <div class="column">
                    <h3>中分類</h3>
                    <ul id="simpleSubcategories">
                    </ul>
                </div>
            </div>
        </div>
        <div class="industry-popup-content" id="industryDetailed">
            <input type="text" placeholder="キーワードで探す" id="detailedIndustryKeyword" class="keyword-search" onkeyup="searchKeyword('detailed', this.value)">
            <div class="columns">
                <div class="column">
                    <h3>大分類</h3>
                    <ul id="detailedCategories">
                        <li><input type="checkbox" id="detailedCategory1" onchange="toggleDetailedCategory('detailedCategory1')"> <label for="detailedCategory1">A.農業、林業</label> <span class="count-box">1,234</span></li>
                        <li><input type="checkbox" id="detailedCategory2" onchange="toggleDetailedCategory('detailedCategory2')"> <label for="detailedCategory2">B.漁業</label> <span class="count-box">567</span></li>
                        <li><input type="checkbox" id="detailedCategory3" onchange="toggleDetailedCategory('detailedCategory3')"> <label for="detailedCategory3">C.鉱業、採石業、砂利採取業</label> <span class="count-box">890</span></li>
                    </ul>
                </div>
                <div class="column">
                    <h3>中分類</h3>
                    <ul id="detailedSubcategories">
                    </ul>
                </div>
                <div class="column">
                    <h3>小分類</h3>
                    <ul id="detailedSmallCategories">
                    </ul>
                </div>
                <div class="column">
                    <h3>細分類</h3>
                    <ul id="detailedFineCategories">
                    </ul>
                </div>
            </div>
        </div>
        <div class="popup-buttons">
            <button onclick="applySelections('industry')">決定する</button>
        </div>
    </div>

    <!-- 地域のポップアップ -->
    <div id="regionPopup" class="popup">
        <div class="popup-header">
            <h2>地域を選択</h2>
            <div class="search-count-popup">検索結果 <span>12,345</span>件</div>
            <button onclick="closePopup('region')">&times;</button>
        </div>
        <input type="text" placeholder="キーワードで探す" id="regionKeyword" class="keyword-search" onkeyup="searchRegionKeyword(this.value)">
        <div class="region-popup-content active">
            <div class="column">
                <h3>都道府県</h3>
                <ul id="regionsList">
                    <li><input type="checkbox" id="region1" onchange="toggleRegion('region1')"> <label for="region1">北海道</label> <span class="count-box">1,234</span></li>
                    <li><input type="checkbox" id="region2" onchange="toggleRegion('region2')"> <label for="region2">青森県</label> <span class="count-box">567</span></li>
                    <li><input type="checkbox" id="region3" onchange="toggleRegion('region3')"> <label for="region3">岩手県</label> <span class="count-box">890</span></li>
                </ul>
            </div>
            <div class="column">
                <h3>市区町村</h3>
                <ul id="municipalitiesList">
                </ul>
            </div>
        </div>
        <div class="popup-buttons">
            <button onclick="applySelections('region')">決定する</button>
        </div>
    </div>

    <!-- #タグのポップアップ -->
    <div id="tagPopup" class="popup">
        <div class="popup-header">
            <h2>#タグを選択</h2>
            <div class="search-count-popup">選択済み <span id="tagCount">0</span>件</div>
            <button onclick="closePopup('tag')">&times;</button>
        </div>
        <input type="text" placeholder="キーワードで探す" id="tagKeyword" class="keyword-search" onkeyup="searchTagKeyword(this.value)">
        <div class="tag-popup-content active">
            <div class="columns">
                <div class="column">
                    <h3>大分類</h3>
                    <ul id="tagCategories">
                        <li><input type="checkbox" id="tagCategory1" onchange="toggleTagCategory('tagCategory1')"> <label for="tagCategory1">カテゴリー1</label> <span class="count-box">123</span></li>
                        <li><input type="checkbox" id="tagCategory2" onchange="toggleTagCategory('tagCategory2')"> <label for="tagCategory2">カテゴリー2</label> <span class="count-box">456</span></li>
                        <li><input type="checkbox" id="tagCategory3" onchange="toggleTagCategory('tagCategory3')"> <label for="tagCategory3">カテゴリー3</label> <span class="count-box">789</span></li>
                    </ul>
                </div>
                <div class="column">
                    <h3>中分類</h3>
                    <ul id="tagSubcategories">
                    </ul>
                </div>
            </div>
            <div class="columns">
                <div class="column">
                    <h3>小分類</h3>
                    <ul id="tagSmallCategories">
                    </ul>
                </div>
            </div>
        </div>
        <div class="popup-buttons">
            <button onclick="applyTagSelections()">決定する</button>
        </div>
    </div>

    <script>
// ポップアップの表示制御
function showPopup(type, event) {
    event.stopPropagation();
    closeAllPopups(); // すべてのポップアップを閉じる
    document.getElementById(type + 'Popup').classList.add('active');
    document.getElementById('popupOverlay').classList.add('active');
}

function closePopup(type) {
    document.getElementById(type + 'Popup').classList.remove('active');
    document.getElementById('popupOverlay').classList.remove('active');
}

function closeAllPopups() {
    document.querySelectorAll('.popup').forEach(popup => popup.classList.remove('active'));
    document.getElementById('popupOverlay').classList.remove('active');
}

// 詳細検索の表示制御
function toggleDetails() {
    const details = document.querySelector('.details');
    const toggleLink = document.querySelector('.toggle-link span');
    if (details.style.display === 'none' || details.style.display === '') {
        details.style.display = 'block';
        toggleLink.innerHTML = '&#9650;'; // 上向き矢印
    } else {
        details.style.display = 'none';
        toggleLink.innerHTML = '&#9660;'; // 下向き矢印
    }
    document.querySelector('.overlay').classList.toggle('expanded');
}

// クリアボタンの動作
function clearInputs(section) {
    const sectionElement = document.querySelector(`.${section}`);
    if (sectionElement) {
        sectionElement.querySelectorAll('input[type="text"], textarea').forEach(input => input.value = '');
        sectionElement.querySelectorAll('input[type="checkbox"]').forEach(checkbox => checkbox.checked = false);
    }
}

// 業種のタブ切り替え
function switchTab(type, tab) {
    document.querySelectorAll(`#${type}Popup .tab`).forEach(tabElement => tabElement.classList.remove('active'));
    document.querySelectorAll(`#${type}Popup .industry-popup-content`).forEach(content => content.classList.remove('active'));
    document.querySelector(`#${type}Popup .tab[data-tab="${tab}"]`).classList.add('active');
    document.getElementById(type + tab.charAt(0).toUpperCase() + tab.slice(1)).classList.add('active');
}

// キーワード検索
function searchKeyword(type, keyword) {
    const categoryMap = {
        'simple': {
            'simpleCategory1': '製造業',
            'simpleCategory2': '小売業',
            'simpleCategory3': 'サービス業'
        },
        'detailed': {
            'detailedCategory1': 'A.農業、林業',
            'detailedCategory2': 'B.漁業',
            'detailedCategory3': 'C.鉱業、採石業、砂利採取業'
        }
    };

    const categories = categoryMap[type];
    for (const [id, name] of Object.entries(categories)) {
        const checkbox = document.getElementById(id);
        if (name.includes(keyword)) {
            checkbox.checked = true;
            if (type === 'simple') {
                toggleSimpleCategory(id);
            } else if (type === 'detailed') {
                toggleDetailedCategory(id);
            }
        } else {
            checkbox.checked = false;
            if (type === 'simple') {
                toggleSimpleCategory(id);
            } else if (type === 'detailed') {
                toggleDetailedCategory(id);
            }
        }
    }
}

// 簡易版業種選択
function toggleSimpleCategory(categoryId) {
    const subcategories = {
        'simpleCategory1': ['食品', '繊維', '木材', '化学'],
        'simpleCategory2': ['衣料品', '日用品', '家電', '書籍'],
        'simpleCategory3': ['飲食', '医療', '教育', '宿泊']
    };
    const selectedSubcategories = subcategories[categoryId] || [];
    const subcategoriesList = document.getElementById('simpleSubcategories');

    if (document.getElementById(categoryId).checked) {
        const newItems = selectedSubcategories.map((subcategory, index) => {
            const uniqueId = `simpleSubcategory_${categoryId}_${index}`;
            return `<li data-category="${categoryId}"><input type="checkbox" id="${uniqueId}"> <label for="${uniqueId}">${subcategory}</label> <span class="count-box">123</span></li>`;
        }).join('');
        subcategoriesList.insertAdjacentHTML('beforeend', newItems);
    } else {
        const itemsToRemove = subcategoriesList.querySelectorAll(`li[data-category="${categoryId}"]`);
        itemsToRemove.forEach(item => item.remove());
    }
}

// 詳細版業種選択
function toggleDetailedCategory(categoryId) {
    $.get('/get_subcategories/', { category_id: categoryId }, function(data) {
        const subcategoriesList = $('#detailedSubcategories');
        subcategoriesList.empty();
        data.forEach(function(subcategory) {
            const uniqueId = `detailedSubcategory_${subcategory.id}`;
            subcategoriesList.append(`<li data-category="${categoryId}"><input type="checkbox" id="${uniqueId}" onchange="toggleDetailedSubcategory('${uniqueId}', '${subcategory.id}')"> <label for="${uniqueId}">${subcategory.code}.${subcategory.name}</label> <span class="count-box">123</span></li>`);
        });
    });
}


function toggleDetailedSubcategory(subcategoryId, subcategory) {
    const smallCategories = {
        '農業': ['管理、補助的経済活動を行う事業所（01農業）', '耕種農業', '畜産農業', '農業サービス業（園芸サービス業を除く）'],
        '林業': ['管理、補助的経済活動を行う事業所（02林業）', '育林業', '素材生産業', '特用林産物生産業（きのこ類の栽培を除く）', '林業サービス業', 'その他の林業'],
        '漁業（水産養殖業を除く）': ['沿岸漁業', '遠洋漁業', '養殖業以外の漁業'],
        '水産養殖業': ['真珠養殖業', '魚介類養殖業', '甲殻類養殖業'],
        '鉱業、採石業、砂利採取業': ['石炭採掘業', '鉱石採掘業', '砂利採取業']
    };
    const selectedSmallCategories = smallCategories[subcategory] || [];
    const smallCategoriesList = document.getElementById('detailedSmallCategories');

    if (document.getElementById(subcategoryId).checked) {
        const newItems = selectedSmallCategories.map((smallCategory, index) => {
            const uniqueId = `detailedSmallCategory_${subcategory}_${index}`;
            return `<li data-subcategory="${subcategory}"><input type="checkbox" id="${uniqueId}" onchange="toggleDetailedSmallCategory('${uniqueId}', '${smallCategory}')"> <label for="${uniqueId}">${smallCategory}</label> <span class="count-box">123</span></li>`;
        }).join('');
        smallCategoriesList.insertAdjacentHTML('beforeend', newItems);
    } else {
        const itemsToRemove = smallCategoriesList.querySelectorAll(`li[data-subcategory="${subcategory}"]`);
        itemsToRemove.forEach(item => {
            const checkbox = item.querySelector('input[type="checkbox"]');
            if (checkbox) {
                checkbox.checked = false;
                toggleDetailedSmallCategory(checkbox.id, checkbox.nextElementSibling.textContent);
            }
            item.remove();
        });
    }
}

function toggleDetailedSmallCategory(smallCategoryId, smallCategory) {
    const fineCategories = {
        '管理、補助的経済活動を行う事業所（01農業）': ['管理活動1', '管理活動2', '管理活動3'],
        '耕種農業': ['野菜耕作業', '果樹耕作業', '穀物耕作業'],
        '畜産農業': ['肉牛飼育', '乳牛飼育', '家禽飼育'],
        '農業サービス業（園芸サービス業を除く）': ['農作業代行', '農業コンサルティング', '農産物輸送'],
        '育林業': ['育成1', '育成2', '育成3'],
        '素材生産業': ['木材生産', '木材加工', '紙パルプ生産'],
        '特用林産物生産業（きのこ類の栽培を除く）': ['きのこ栽培', '松茸栽培', '他の特用林産物栽培'],
        '林業サービス業': ['林業コンサルティング', '森林管理', '森林施業'],
        '沿岸漁業': ['沿岸魚類漁業', '沿岸貝類漁業', '沿岸海藻採取'],
        '遠洋漁業': ['遠洋魚類漁業', '遠洋貝類漁業', '遠洋海藻採取'],
        '真珠養殖業': ['真珠養殖1', '真珠養殖2', '真珠養殖3'],
        '魚介類養殖業': ['魚介類養殖1', '魚介類養殖2', '魚介類養殖3'],
        '甲殻類養殖業': ['甲殻類養殖1', '甲殻類養殖2', '甲殻類養殖3'],
        '石炭採掘業': ['石炭採掘1', '石炭採掘2', '石炭採掘3'],
        '鉱石採掘業': ['鉱石採掘1', '鉱石採掘2', '鉱石採掘3'],
        '砂利採取業': ['砂利採取1', '砂利採取2', '砂利採取3']
    };
    const selectedFineCategories = fineCategories[smallCategory] || [];
    const fineCategoriesList = document.getElementById('detailedFineCategories');

    if (document.getElementById(smallCategoryId).checked) {
        const newItems = selectedFineCategories.map((fineCategory, index) => {
            const uniqueId = `detailedFineCategory_${smallCategory}_${index}`;
            return `<li data-smallcategory="${smallCategory}"><input type="checkbox" id="${uniqueId}"> <label for="${uniqueId}">${fineCategory}</label> <span class="count-box">123</span></li>`;
        }).join('');
        fineCategoriesList.insertAdjacentHTML('beforeend', newItems);
    } else {
        const itemsToRemove = fineCategoriesList.querySelectorAll(`li[data-smallcategory="${smallCategory}"]`);
        itemsToRemove.forEach(item => item.remove());
    }
}

// 地域選択
function toggleRegion(regionId) {
    const municipalities = {
        'region1': ['札幌市', '旭川市', '函館市'],
        'region2': ['青森市', '弘前市', '八戸市'],
        'region3': ['盛岡市', '一関市', '北上市']
    };

    const regionCheckbox = document.getElementById(regionId);
    const municipalitiesList = document.getElementById('municipalitiesList');

    if (regionCheckbox.checked) {
        const selectedMunicipalities = municipalities[regionId] || [];
        selectedMunicipalities.sort();
        const newItems = selectedMunicipalities.map((municipality, index) => {
            const uniqueId = `municipality_${regionId}_${index}`;
            return `<li data-region="${regionId}"><input type="checkbox" id="${uniqueId}"> <label for="${uniqueId}">${municipality}</label> <span class="count-box">123</span></li>`;
        }).join('');
        municipalitiesList.insertAdjacentHTML('beforeend', newItems);
    } else {
        const itemsToRemove = municipalitiesList.querySelectorAll(`li[data-region="${regionId}"]`);
        itemsToRemove.forEach(item => item.remove());
    }
}

// 地域キーワード検索
function searchRegionKeyword(keyword) {
    const regionMap = {
        'region1': '北海道',
        'region2': '青森県',
        'region3': '岩手県'
    };

    for (const [id, name] of Object.entries(regionMap)) {
        const checkbox = document.getElementById(id);
        if (name.includes(keyword)) {
            checkbox.checked = true;
            toggleRegion(id);
        } else {
            checkbox.checked = false;
            toggleRegion(id);
        }
    }
}

// ポップアップの選択適用
function applySelections(type) {
    if (type === 'industry') {
        let selectedItems = [];
        if (document.querySelector(`#${type}Popup .tab.active`).getAttribute('data-tab') === 'simple') {
            selectedItems = Array.from(document.querySelectorAll('#simpleSubcategories input[type="checkbox"]:checked')).map(checkbox => checkbox.nextElementSibling.textContent);
        } else {
            selectedItems = Array.from(document.querySelectorAll('#detailedFineCategories input[type="checkbox"]:checked')).map(checkbox => checkbox.nextElementSibling.textContent);
        }
        document.getElementById('industryInput').value = selectedItems.sort().join(', ');
    } else if (type === 'region') {
        const selectedMunicipalities = Array.from(document.querySelectorAll('#municipalitiesList input[type="checkbox"]:checked')).map(checkbox => checkbox.nextElementSibling.textContent);
        document.getElementById('regionInput').value = selectedMunicipalities.sort().join(', ');
    }

    closePopup(type);
}

// タグのキーワード検索
function searchTagKeyword(keyword) {
    const tagMap = {
        'tagCategory1': 'カテゴリー1',
        'tagCategory2': 'カテゴリー2',
        'tagCategory3': 'カテゴリー3'
    };

    for (const [id, name] of Object.entries(tagMap)) {
        const checkbox = document.getElementById(id);
        if (name.includes(keyword)) {
            checkbox.checked = true;
            toggleTagCategory(id);
        } else {
            checkbox.checked = false;
            toggleTagCategory(id);
        }
    }
}

// タグのカテゴリ選択
function toggleTagCategory(categoryId) {
    const subcategories = {
        'tagCategory1': ['サブカテゴリー1', 'サブカテゴリー2'],
        'tagCategory2': ['サブカテゴリー3', 'サブカテゴリー4'],
        'tagCategory3': ['サブカテゴリー5', 'サブカテゴリー6']
    };
    const selectedSubcategories = subcategories[categoryId] || [];
    const subcategoriesList = document.getElementById('tagSubcategories');

    if (document.getElementById(categoryId).checked) {
        const newItems = selectedSubcategories.map((subcategory, index) => {
            const uniqueId = `tagSubcategory_${categoryId}_${index}`;
            return `<li data-category="${categoryId}"><input type="checkbox" id="${uniqueId}" onchange="toggleTagSubcategory('${uniqueId}', '${subcategory}')"> <label for="${uniqueId}">${subcategory}</label> <span class="count-box">123</span></li>`;
        }).join('');
        subcategoriesList.insertAdjacentHTML('beforeend', newItems);
    } else {
        const itemsToRemove = subcategoriesList.querySelectorAll(`li[data-category="${categoryId}"]`);
        itemsToRemove.forEach(item => {
            const checkbox = item.querySelector('input[type="checkbox"]');
            if (checkbox) {
                checkbox.checked = false;
                toggleTagSubcategory(checkbox.id, checkbox.nextElementSibling.textContent);
            }
            item.remove();
        });
    }
}

// タグのサブカテゴリ選択
function toggleTagSubcategory(subcategoryId, subcategory) {
    const smallCategories = {
        'サブカテゴリー1': ['小カテゴリー1', '小カテゴリー2'],
        'サブカテゴリー2': ['小カテゴリー3', '小カテゴリー4'],
        'サブカテゴリー3': ['小カテゴリー5', '小カテゴリー6'],
        'サブカテゴリー4': ['小カテゴリー7', '小カテゴリー8'],
        'サブカテゴリー5': ['小カテゴリー9', '小カテゴリー10'],
        'サブカテゴリー6': ['小カテゴリー11', '小カテゴリー12']
    };
    const selectedSmallCategories = smallCategories[subcategory] || [];
    const smallCategoriesList = document.getElementById('tagSmallCategories');

    if (document.getElementById(subcategoryId).checked) {
        const newItems = selectedSmallCategories.map((smallCategory, index) => {
            const uniqueId = `tagSmallCategory_${subcategory}_${index}`;
            return `<li data-subcategory="${subcategory}"><input type="checkbox" id="${uniqueId}"> <label for="${uniqueId}">${smallCategory}</label> <span class="count-box">123</span></li>`;
        }).join('');
        smallCategoriesList.insertAdjacentHTML('beforeend', newItems);
    } else {
        const itemsToRemove = smallCategoriesList.querySelectorAll(`li[data-subcategory="${subcategory}"]`);
        itemsToRemove.forEach(item => item.remove());
    }
}

// タグの選択を適用
function applyTagSelections() {
    const selectedTags = Array.from(document.querySelectorAll('#tagSmallCategories input[type="checkbox"]:checked')).map(checkbox => checkbox.nextElementSibling.textContent);
    document.getElementById('tags').value = selectedTags.sort().join(', ');
    document.getElementById('tagCount').textContent = selectedTags.length;
    closePopup('tag');
}

// メニューの表示/非表示を切り替える
function toggleMenu() {
    const dropdown = document.getElementById('dropdownMenu');
    dropdown.classList.toggle('active');
}

// ドキュメントがクリックされたときに、ドロップダウンメニューを閉じる
document.addEventListener('click', (event) => {
    const dropdown = document.getElementById('dropdownMenu');
    const menuToggle = document.querySelector('.menu-toggle');

    if (!dropdown.contains(event.target) && !menuToggle.contains(event.target)) {
        dropdown.classList.remove('active');
    }
});

// ページのロード時にfor属性を追加
window.onload = () => {
    document.querySelectorAll('label').forEach((label, index) => {
        const input = label.previousElementSibling;
        if (input && input.id) {
            label.setAttribute('for', input.id);
        }
    });

    // 数字のみの入力制限とカンマ区切りの自動挿入
    document.querySelectorAll('.numeric-only').forEach(input => {
        input.addEventListener('input', () => {
            input.value = input.value.replace(/[^0-9]/g, '');
            formatNumber(input); // 入力時にフォーマット関数を呼び出す
        });
    });
};

// 数字の入力をフォーマットする
function formatNumber(input) {
    let value = input.value.replace(/,/g, ''); // 既存のカンマを削除
    if (value) {
        value = parseInt(value, 10).toLocaleString(); // カンマ付きで再フォーマット
        input.value = value;
    }
}

// フォーマット対象のフィールドを設定する
const fields = [
    'revenueMin', 'revenueMax', 'profitMin', 'profitMax',
    'capitalMin', 'capitalMax', 'employeesMin', 'employeesMax',
    'branchesMin', 'branchesMax', 'storesMin', 'storesMax',
    'factoriesMin', 'factoriesMax'
];

// 各フィールドにフォーマット関数を適用する
fields.forEach(fieldId => {
    const field = document.getElementById(fieldId);
    if (field) {
        field.addEventListener('input', () => formatNumber(field));
    }
});
    </script>
</body>
</html>
